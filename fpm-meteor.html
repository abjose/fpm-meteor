<head>
  <title>simple-todos</title>
</head>
<body>
  {{> fpm}}
</body>

<template name="canv">
  <canvas id="canvas" width="500" height="500"></canvas>
</template>

<template name="fpm">
  {{> tools }}
  <div id="project_area">
    {{> canv }}
    <!-- can use "with" instead -->
    {{#each currentProject}}
      {{> project}}
    {{/each}}
  </div>
</template>

<template name="title">
  <div id="titlebox">
    fpm
  </div>
</template>

<template name="tools">
  {{> projectInfo }}
  {{> toolbar }}
</template>

<template name="projectInfo">
  <!-- Populate projectInfo area. -->
  <div id="topbar">
    <!-- Put all on same line to avoid little gap. I hate html. -->
    {{> title }}<div class="projectInfo">
      {{#each tags}}
      {{> tag}}
      {{/each}}
    </div>
  </div>
</template>

<!-- why aren't they flush with top? -->
<template name="tag">
  <div class="tag" contentEditable="true">
    {{ title }}
  </div>
</template>

<template name="toolbar">
  <div class="toolbar">
    {{#each tools}}
      {{> toolbarItem}}
    {{/each}}
    <!-- each tools... -->
  </div>
</template>

<template name="toolbarItem">
  <!-- oh god better name please? maybe just 'tool' -->
  <div class="toolbarItem">
    {{ name }}
  </div>
</template>

<template name="project">
  <!-- consider using template subscrption and Template.subscriptionsReady -->
  <!-- Render every entity for this project. -->
  {{#each entities}}
    {{> entity}}
  {{/each}}
  {{refreshPaper}}
</template>

<!-- probably should wrap tag template in another div -->

<template name="entity">
  <!-- TODO: branch to different kinds of entity -->
  {{> branchToEntity}}
</template>

<template name="textbox">
  <div class="testdiv"
       style="top:{{ty}}px; left:{{tx}}px; width:{{w}}px; height:{{h}}px;
	      transform: scale({{scale}}, {{scale}});
	      -webkit-transform: scale({{scale}}, {{scale}});">
    {{ text }}
  </div>
</template>

<template name="edge">
  {{ draw }}
</template>
