<head>
  <title>simple-todos</title>
</style>

</head>
<body>
  {{> fpm}}
</body>

<template name="canv">
  <canvas id="canvas"></canvas>
</template>

<template name="fpm">
  {{> tools }}
  <div id="project_area">
    {{> canv }}
    <!-- can use "with" instead -->
    {{#each currentProject}}
      {{> project}}
    {{/each}}
  </div>
</template>

<template name="title">
  <div id="titlebox">
    fpm
  </div>
</template>

<template name="tools">
  {{> projectInfo }}
  {{> toolbar }}
</template>

<template name="projectInfo">
  <!-- Populate projectInfo area. -->
  <div id="topbar">
    {{> title }}
    <div class="projectInfo">
      <div> {{ projectTitle }} </div>
      {{#each tags}}
        {{> tag}}
      {{/each}}
      <div> backref1 backref2 </div>
    </div>
  </div>
</template>

<!-- why aren't they flush with top? -->
<template name="tag">
  <div class="tag" contentEditable="true">
    {{ title }}
  </div>
</template>

<template name="toolbar">
  <div class="toolbar">
    {{#each tools}}
      {{> toolbarItem}}
    {{/each}}
    <!-- each tools... -->
  </div>
</template>

<template name="toolbarItem">
  <!-- oh god better name please? maybe just 'tool' -->
  <div class="toolbarItem{{#if isSelected}}-selected{{/if}}">
    {{ name }}
  </div>
</template>

<template name="project">
  <!-- consider using template subscrption and Template.subscriptionsReady -->
  <!-- Render every entity for this project. -->
  {{#each entities}}
    {{> entity}}
  {{/each}}
  {{refreshPaper}}
</template>

<!-- probably should wrap tag template in another div -->

<template name="entity">
  <!-- TODO: branch to different kinds of entity -->
  {{> branchToEntity}}
</template>

<template name="textbox">
  <textarea class="textbox-editing"
  	    style="top:{{ty}}px; left:{{tx}}px; width: {{w}}; height: {{h}};
  		   transform: scale({{scale}}, {{scale}});
  		   -webkit-transform: scale({{scale}}, {{scale}});">{{text}}</textarea>  
</template>

<template name="edge">
  {{ draw }}
</template>

<template name="project_link">
  <!-- don't need full link!! -->
  <!-- <a href="/root?x=250&y=250&scale=1">root</a> -->
  <div class="project_link"
       style="top:{{ty}}px; left:{{tx}}px; width: {{w}}; height: {{h}};
  	      transform: scale({{scale}}, {{scale}});
  	      -webkit-transform: scale({{scale}}, {{scale}});"><a href="{{project_link}}">blah</a></div>
</template>
